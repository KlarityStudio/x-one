/**
 * BoxFish.js
 *
 * jQuery plugin to create dynamic resizing columnar boxes.
 *
 * @version: 0.2
 * @authors: Jeremy Harris
 * @license: MIT
 */
!function($){$.fn.boxfish=function(t){function o(){n()}function n(){w=c(),v=h(),e()}function e(){var t=u(),o=d.first();alert(t),k=parseInt(o.css("margin-left"),10)+parseInt(o.css("margin-right"),10),I=parseInt(o.css("padding-left"),10)+parseInt(o.css("padding-right"),10),horizontalBorders=parseInt(o.css("border-left-width"),10)+parseInt(o.css("border-right-width"),10),d.each(function(o,n){if($(this).hasClass("w2")){var e=t,i="2";$(this).width(e*i)}else $(this).width(t-(k+I+horizontalBorders))})}function r(){}function s(){var t=[];for(x=0;x<d.length;x++)topPos=d[x].offsetTop,t[topPos]||(t[topPos]=[]),t[topPos].push(d[x]);for(var o in t){for(maxRowHeight=[],x=0;x<t[o].length;x++){var n=$(t[o][x]).outerHeight(!0);maxRowHeight[o]||(maxRowHeight[o]=0),maxRowHeight[o]<n&&(maxRowHeight[o]=n)}for(x=0;x<t[o].length;x++)$(t[o][x]).animate({height:maxRowHeight[o]},1)}}function a(){return $(d).css("clear","")}function f(){var t=$(d).first(),o=$(t),n=$(t),e=0,i=0;a(),$(d).css("border","1px solid #DDD"),d.each(function(r,s){e=$(s).offset(),console.log("/=====================================\\"),console.log($(s).attr("id")+": LEFT = "+e.left+" ... TOP = "+e.top),console.log($(n).offset()),console.log("\\=====================================/"),i>0&&e.left==t.offset().left&&e.top>=n.offset().top&&(console.log("BOX "+$(o).attr("id")+" CLEARED"),console.log("COUNT: "+i),console.log("LEFT OFFSET: "+e.left),$(o).css("border","1px solid red"),n=null,n=$(s)),i++,o=$(s)}),console.log("--------------"),console.log("--------------"),console.log("--------------"),console.log("--------------")}function l(){var t=d.find("img");return t.each(function(t,o){return o.complete?"undefined"!=typeof o.naturalWidth&&0===o.naturalWidth?!1:void 0:!1}),!0}function c(){return parseInt(m.width(),10)}function h(){return parseInt(m.height(),10)}function u(){var t=[0,0],o=g.columns;for(i=0;i<g.breakpoints.length;i++)g.breakpoints[i][0]<w&&g.breakpoints[i][0]>t[0]&&(t=g.breakpoints[i]);return t[1]>0&&(o=t[1]),w/o}function p(){var t=0,o=0;return d.each(function(n,e){o=$(this).outerHeight(!0),o>t&&(t=o)}),t}var g=$.extend({columns:3,breakpoints:[]},t),d=$(this),b=d.length,m=d.parent(),w=c(),v=h(),k=0,I=0,T;d.addClass("boxfish-box"),m.addClass("boxfish-container"),n(),$(window).on("resize",function(){clearTimeout(T),T=setTimeout(o,100)});var H=function(){setTimeout(function(){l()?r():H()},100)};return H(),this.addBreakpoint=function(t,o){t=parseInt(t,10),o=parseInt(o,10);var n=!1;for(i=0;i<g.breakpoints.length;i++)if(g.breakpoints[i][0]==t){g.breakpoints[i][1]=o,n=!0;break}return n||(g.breakpoints[g.breakpoints.length]=[t,o]),e(),this},this}}(jQuery);